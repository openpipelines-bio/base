name: csv2fasta
description: Convert two columns from a CSV file to FASTA entries.
argument_groups:
  - name: Inputs
    arguments:
    - name: --input
      type: file
      direction: input
      example: barcodes.csv
      description: CSV file to be processed.
      required: true
  - name: "CSV Format arguments"
    arguments:
      - name: --header
        type: boolean_true
        description: |
          Parse the first line of the CSV file as a header.
      - name: --delimiter
        type: string
        description: |
          Column delimiter
        default: ","
      - name: --quote_character
        type: string
        description: |
          Character used to denote the start and end of a quoted item.
        default: '"'
  - name: "CSV column arguments"
    description: |
      Parameters for the selection of columns from the CSV file.
      Only required when your CSV file contains more than 2 columns.
    arguments:
      - name: --sequence_column
        type: string
        description: |
          Name of the column containing the sequences. Implies 'header'.
          Cannot be used together with 'sequence_column_index'.
        required: false
      - name: "--name_column"
        type: string
        description: |
          Name of the column describing the FASTA headers. Implies 'header'.
          Cannot be used together with 'name_column_index'.
        required: false
      - name: "--sequence_column_index"
        type: integer
        min: 0
        description: | 
          Index of the column to use as the FASTA sequences, counter from the left and
          starting from 0. Cannot be used in combination with the 'sequence_column' argument.
        required: false
      - name: "--name_column_index"
        type: integer
        min: 0
        description: | 
          Index of the column to use as the FASTA headers, counter from the left and
          starting from 0. Cannot be used in combination with 'name_column'.
        required: false 
  - name: Outputs
    arguments:
      - name: "--output"
        type: file
        example: barcodes.fasta
        direction: output
        description: Output fasta file.

resources:
  - type: python_script
    path: script.py
test_resources:
  - type: python_script
    path: test_csv2fasta.py

engines:
  - type: docker
    image: python:slim
    setup:
      - type: apt
        packages:
          - procps
      - type: python
        packages: 
          - dnaio
    test_setup:
      - type: python
        packages:
          - pytest
          - viashpy

runners:
  - type: executable
  - type: nextflow